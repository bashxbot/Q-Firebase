{% extends "base.html" %}

{% block content %}
<script>
document.body.dataset.isAdmin = '{{ is_admin|lower }}';
</script>
<div class="container">
    <div class="resale-header">
        <h2>
            <i class="fas fa-store"></i>
            Resale System
        </h2>
        <div class="resale-search">
            <input type="text" id="resellerSearch" placeholder="Search resellers..." onkeyup="searchResellers()">
            <button onclick="searchResellers()">
                <i class="fas fa-search"></i>
            </button>
        </div>
    </div>

    <!-- User View -->
    {% if user_role == 'user' %}
    <div class="resale-content">
        <div class="resale-card">
            <h3>
                <i class="fas fa-user-plus"></i>
                Become a Reseller
            </h3>
            <p>Join our reseller program and start earning commissions!</p>
            <div class="privileges">
                <h4>Reseller Privileges:</h4>
                <ul>
                    <li><i class="fas fa-dollar-sign"></i> Earn commissions on every sale</li>
                    <li><i class="fas fa-chart-line"></i> Track your sales and earnings</li>
                    <li><i class="fas fa-link"></i> Create custom referral links</li>
                    <li><i class="fas fa-users"></i> Build your own customer base</li>
                </ul>
            </div>
            <div class="guidelines">
                <h4>Guidelines:</h4>
                <ul>
                    <li>Maintain professional communication</li>
                    <li>Provide accurate product information</li>
                    <li>Support your referred customers</li>
                    <li>Follow platform terms of service</li>
                </ul>
            </div>
            <button onclick="showResellerRequestModal()" class="resale-btn">
                <i class="fas fa-hand-paper"></i>
                Request Reseller Access
            </button>
        </div>

        <div class="pricing-tiers">
            <h3>
                <i class="fas fa-tags"></i>
                Subscription Tiers
            </h3>
            <div class="pricing-grid">
                {% for tier_name, prices in pricelist.items() %}
                <div class="tier-card {{ tier_name }}">
                    <h4>{{ tier_name.title() }} Edition</h4>
                    <div class="price-headers">
                        <span class="price-header">For Users</span>
                        <span class="price-header">For Resellers</span>
                    </div>
                    {% for duration, price_info in prices.items() %}
                    <div class="price-row">
                        <span class="duration">{{ duration }} days</span>
                        <span class="user-price">${{ "%.2f"|format(price_info.user_price) }}</span>
                        <span class="reseller-price">${{ "%.2f"|format(price_info.reseller_price) }}</span>
                    </div>
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Admin/Reseller View -->
    {% if user_role == 'admin' or user_role == 'reseller' %}
    <div class="reseller-dashboard">
        <div class="best-resellers">
            <h3 id="topResellersTitle">
                <i class="fas fa-trophy"></i>
                Top Resellers
            </h3>
            <div id="bestResellersList" class="top-resellers-scroll"></div>
        </div>

        <div class="reseller-list">
            <h3>
                <i class="fas fa-users"></i>
                All Resellers
            </h3>
            <div id="resellersList"></div>
        </div>

        {% if user_role == 'reseller' %}
        <div class="dashboard-stats">
            <h3>
                <i class="fas fa-chart-bar"></i>
                Dashboard
            </h3>
            <div id="resellerStats" class="stats-grid"></div>
        </div>

        <div class="referral-management">
            <h3>
                <i class="fas fa-code"></i>
                Referral Codes
            </h3>
            <button onclick="showCreateReferralModal()" class="resale-btn">
                <i class="fas fa-plus"></i>
                Create New Code
            </button>
            <div id="referralCodes" class="codes-list"></div>
        </div>
        {% endif %}

        <div class="pricing-tiers">
            <h3>
                <i class="fas fa-tags"></i>
                Subscription Tiers
            </h3>
            <div class="pricing-grid">
                {% for tier_name, prices in pricelist.items() %}
                <div class="tier-card {{ tier_name }}">
                    <h4>{{ tier_name.title() }} Edition</h4>
                    <div class="price-headers">
                        <span class="price-header">For Users</span>
                        <span class="price-header">For Resellers</span>
                    </div>
                    {% for duration, price_info in prices.items() %}
                    <div class="price-row">
                        <span class="duration">{{ duration }} days</span>
                        <span class="user-price">${{ "%.2f"|format(price_info.user_price) }}</span>
                        <span class="reseller-price">${{ "%.2f"|format(price_info.reseller_price) }}</span>
                    </div>
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}
</div>

<!-- Modals -->
<div id="resellerRequestModal" class="modal">
    <div class="modal-content">
        <h3>
            <i class="fas fa-user-plus"></i>
            Request Reseller Access
        </h3>
        <div class="form-group">
            <label>Why do you want to become a reseller?</label>
            <textarea id="resellerMessage" rows="4" placeholder="Tell us about your motivation and experience..."></textarea>
        </div>
        <div class="modal-actions">
            <button onclick="submitResellerRequest()">
                <i class="fas fa-paper-plane"></i>
                Submit Request
            </button>
            <button onclick="closeModal('resellerRequestModal')" class="btn-secondary">
                <i class="fas fa-times"></i>
                Cancel
            </button>
        </div>
    </div>
</div>

<div id="createReferralModal" class="modal">
    <div class="modal-content">
        <h3>
            <i class="fas fa-code"></i>
            Create Referral Code
        </h3>
        <div class="form-group">
            <label>Code Name:</label>
            <input type="text" id="newReferralCode" placeholder="Enter referral code...">
        </div>
        <div class="form-group">
            <label>Target Tier:</label>
            <select id="newReferralTier">
                <option value="Silver Edition">Silver Edition</option>
                <option value="Gold Edition">Gold Edition</option>
                <option value="Elite Edition">Elite Edition</option>
            </select>
        </div>
        <div class="form-group">
            <label>Usage Limit:</label>
            <input type="number" id="newReferralLimit" value="100" min="1">
        </div>
        <div class="form-group">
            <label>Commission Rate (%):</label>
            <input type="number" id="newCommissionRate" value="10" min="1" max="50">
        </div>
        <div class="modal-actions">
            <button onclick="createReferralCode()">
                <i class="fas fa-plus"></i>
                Create Code
            </button>
            <button onclick="closeModal('createReferralModal')" class="btn-secondary">
                <i class="fas fa-times"></i>
                Cancel
            </button>
        </div>
    </div>
</div>

<div id="chatModal" class="modal">
    <div class="modal-content chat-modal">
        <div class="chat-header">
            <h3 id="chatModalTitle">
                <i class="fas fa-comments"></i>
                Chat
            </h3>
            <button onclick="closeModal('chatModal')" class="chat-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chat-messages" id="chatMessages"></div>
        <div class="chat-input">
            <input type="text" id="chatMessageInput" placeholder="Type your message..." onkeypress="handleChatKeypress(event)">
            <button onclick="sendChatMessage()">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>
</div>

<script>
// Include all resale system JavaScript functions from the main template
let currentChatRecipient = '';

function loadResaleData() {
    fetch('/api/resale/resellers')
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            allResellers = data.resellers;
            filteredResellers = [...allResellers];
            displayResellers(filteredResellers);
            displayBestResellers(filteredResellers);
        }
    });

    const username = '{{ session.get("username", "") }}';
    if ('{{ user_role }}' === 'reseller') {
        fetch(`/api/resale/dashboard/${username}`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                displayResellerDashboard(data.dashboard);
            }
        });
    }
}

function displayResellers(resellers) {
    const container = document.getElementById('resellersList');
    if (!container) return;

    // Sort by credits (total earned) for ranking - only visible to that reseller
    const currentUser = '{{ session.get("username", "") }}';
    const sortedResellers = [...resellers].sort((a, b) => (b.credits || 0) - (a.credits || 0));

    container.innerHTML = sortedResellers.map(reseller => {
        const sales = reseller.sales || 0;
        const credits = reseller.credits || 0;
        let rankName = 'Rookie';

        // Ranking based on credits earned
        if (credits >= 1000) rankName = 'Elite';
        else if (credits >= 500) rankName = 'Expert';
        else if (credits >= 200) rankName = 'Pro';
        else if (credits >= 100) rankName = 'Advanced';

        return `
            <div class="reseller-item" data-username="${reseller.username.toLowerCase()}">
                <div class="reseller-info">
                    <h4>${reseller.username}</h4>
                    <div class="reseller-stats">
                        <span class="stat">üí∞ ${sales} sales</span>
                        <span class="stat">üèÜ ${rankName}</span>
                        ${currentUser === reseller.username ? `<span class="stat">üí≥ ${credits} credits</span>` : ''}
                        <span class="stat">‚ö° ${reseller.commission_rate || 10}% commission</span>
                    </div>
                    <div class="platforms">
                        ${(reseller.platforms || []).map(platform => 
                            `<i class="fab fa-${platform}" title="${platform}" onclick="openSocialMedia('${reseller.username}', '${platform}')"></i>`
                        ).join('')}
                    </div>
                </div>
                <div class="reseller-actions">
                    <button onclick="openChat('${reseller.username}')" class="btn-secondary">
                        <i class="fas fa-comments"></i>
                        Message
                    </button>
                    <button onclick="viewResellerProfile('${reseller.username}')" class="btn-secondary">
                        <i class="fas fa-user"></i>
                        Profile
                    </button>
                </div>
            </div>
        `;
    }).join('');
}

function displayBestResellers(resellers) {
    const container = document.getElementById('bestResellersList');
    if (!container) return;

    // Sort by credits (highest first)
    const topResellers = resellers
        .sort((a, b) => (b.credits || 0) - (a.credits || 0))
        .slice(0, 5);

    container.innerHTML = topResellers.map((reseller, index) => {
        let rankName = 'Rookie';
        const credits = reseller.credits || 0;
        const sales = reseller.sales || 0;

        if (credits >= 1000) rankName = 'Elite';
        else if (credits >= 500) rankName = 'Expert';
        else if (credits >= 200) rankName = 'Pro';
        else if (credits >= 100) rankName = 'Advanced';

        return `
            <div class="best-reseller-item">
                <div class="rank-badge">#${index + 1}</div>
                <div class="reseller-info">
                    <h4>${reseller.username}</h4>
                    <div class="rank">üèÜ ${rankName}</div>
                    <div class="sales">${sales} sales</div>
                </div>
                <button onclick="openChat('${reseller.username}')" class="btn-secondary">
                    <i class="fas fa-comments"></i>
                    Chat
                </button>
            </div>
        `;
    }).join('');
}

let allResellers = [];
let filteredResellers = [];

function searchResellers() {
    const searchTerm = document.getElementById('resellerSearch').value.toLowerCase().trim();

    if (!searchTerm) {
        // Show all resellers if search is empty
        filteredResellers = [...allResellers];
        document.getElementById('topResellersTitle').innerHTML = `
            <i class="fas fa-trophy"></i>
            Top Resellers
        `;
        displayBestResellers(filteredResellers);
        displayResellers(filteredResellers);
        return;
    }

    // Filter resellers based on search term
    filteredResellers = allResellers.filter(reseller => {
        const username = reseller.username.toLowerCase();
        const sales = (reseller.sales || 0).toString();
        return username.includes(searchTerm) || sales.includes(searchTerm);
    });

    // Update title to show search results
    document.getElementById('topResellersTitle').innerHTML = `
        <i class="fas fa-search"></i>
        Search results for "${searchTerm}"
    `;

    displayBestResellers(filteredResellers);
    displayResellers(filteredResellers);
}

function openSocialMedia(username, platform) {
    // This would open the reseller's social media profile
    alert(`Opening ${platform} profile for ${username}`);
}

function viewResellerProfile(username) {
    // This would show detailed reseller profile
    alert(`Viewing profile for ${username}`);
}

function displayResellerDashboard(dashboard) {
    const statsContainer = document.getElementById('resellerStats');
    if (statsContainer) {
        statsContainer.innerHTML = `
            <div class="stat-card">
                <div class="stat-value">${dashboard.stats.users_referred}</div>
                <div class="stat-label">Users Referred</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">$${dashboard.stats.earnings.pending.toFixed(2)}</div>
                <div class="stat-label">Pending Earnings</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">${dashboard.stats.commission_rate}%</div>
                <div class="stat-label">Commission Rate</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">${dashboard.stats.credits}</div>
                <div class="stat-label">Credits</div>
            </div>
        `;
    }

    const codesContainer = document.getElementById('referralCodes');
    if (codesContainer) {
        codesContainer.innerHTML = dashboard.referral_codes.map(code => `
            <div class="code-item">
                <div class="code-info">
                    <strong>${code.code}</strong>
                    <span>${code.used}/${code.limit} used</span>
                    <span>${code.tier}</span>
                </div>
                <div class="code-actions">
                    <button onclick="copyToClipboard('${code.code}')" class="btn-secondary">
                        <i class="fas fa-copy"></i>
                        Copy
                    </button>
                </div>
            </div>
        `).join('');
    }
}

function showResellerRequestModal() {
    showModal('resellerRequestModal');
}

function submitResellerRequest() {
    const message = document.getElementById('resellerMessage').value.trim();

    if (!message) {
        alert('Please provide a message');
        return;
    }

    fetch('/api/resale/request_reseller', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({message: message})
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert(data.message);
            closeModal('resellerRequestModal');
        } else {
            alert(data.error);
        }
    });
}

function showCreateReferralModal() {
    showModal('createReferralModal');
}

function createReferralCode() {
    const code = document.getElementById('newReferralCode').value.trim();
    const tier = document.getElementById('newReferralTier').value;
    const limit = parseInt(document.getElementById('newReferralLimit').value);
    const commissionRate = parseInt(document.getElementById('newCommissionRate').value);

    if (!code) {
        alert('Please enter a referral code');
        return;
    }

    fetch('/api/resale/create_referral', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
            code: code,
            tier: tier,
            limit: limit,
            commission_rate: commissionRate
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert(data.message);
            closeModal('createReferralModal');
            loadResaleData();
        } else {
            alert(data.error);
        }
    });
}

function openChat(recipient) {
    currentChatRecipient = recipient;
    document.getElementById('chatModalTitle').innerHTML = `<i class="fas fa-comments"></i> Chat with ${recipient}`;
    loadChatMessages(recipient);
    showModal('chatModal');
}

function loadChatMessages(recipient) {
    fetch(`/api/resale/chat/get/${recipient}`)
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            displayChatMessages(data.messages);
        }
    });
}

function displayChatMessages(messages) {
    const container = document.getElementById('chatMessages');
    const currentUser = '{{ session.get("username", "") }}';

    container.innerHTML = messages.map(msg => `
        <div class="chat-message ${msg.sender === currentUser ? 'own' : 'other'}">
            <div class="message-bubble ${msg.sender === currentUser ? 'own' : 'other'}">
                ${msg.message}
                <div class="message-time">${new Date(msg.timestamp).toLocaleTimeString()}</div>
            </div>
        </div>
    `).join('');

    container.scrollTop = container.scrollHeight;
}

function handleChatKeypress(event) {
    if (event.key === 'Enter') {
        sendChatMessage();
    }
}

function sendChatMessage() {
    const input = document.getElementById('chatMessageInput');
    const message = input.value.trim();

    if (!message) return;

    fetch('/api/resale/chat/send', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
            recipient: currentChatRecipient,
            message: message
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            input.value = '';
            loadChatMessages(currentChatRecipient);
        }
    });
}

// Removed complex tab functions - using simpler layout now

function showModal(modalId) {
    document.getElementById(modalId).style.display = 'block';
    document.body.style.overflow = 'hidden';
}

function closeModal(modalId) {
    document.getElementById(modalId).style.display = 'none';
    document.body.style.overflow = 'auto';
}

function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
        alert('Copied to clipboard!');
    });
}

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    loadResaleData();
    
    // Set up real-time updates every 30 seconds
    setInterval(loadResaleData, 30000);
    
    // Refresh data when page becomes visible
    document.addEventListener('visibilitychange', function() {
        if (!document.hidden) {
            loadResaleData();
        }
    });
});
</script>

<style>
/* Include all resale-specific styles from the main template */
.resale-header {
    text-align: center;
    margin-bottom: 32px;
}

.resale-header h2 {
    font-family: 'JetBrains Mono', monospace;
    font-size: 28px;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.resale-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    margin-bottom: 32px;
}

.resale-card {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 16px;
    padding: 24px;
    box-shadow: var(--shadow-card);
}

.resale-card h3 {
    font-family: 'JetBrains Mono', monospace;
    color: var(--accent-primary);
    margin-bottom: 16px;
}

.privileges ul, .guidelines ul {
    list-style: none;
    padding: 0;
}

.privileges li, .guidelines li {
    padding: 8px 0;
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--fg-secondary);
}

.privileges i {
    color: var(--accent-primary);
    width: 16px;
}

.resale-btn {
    background: var(--gradient-primary);
    color: var(--bg-primary);
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 16px;
}

.resale-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-neon);
}

.pricing-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 16px;
    margin-top: 16px;
}

.tier-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 12px;
    padding: 20px;
    text-align: center;
}

.tier-card h4 {
    font-family: 'JetBrains Mono', monospace;
    color: var(--accent-primary);
    margin-bottom: 16px;
}

.price-headers {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 8px;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 2px solid var(--accent-primary);
}

.price-header {
    font-weight: 600;
    color: var(--accent-primary);
    font-size: 14px;
}

.price-row {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 8px;
    margin-bottom: 8px;
    padding: 8px 0;
    border-bottom: 1px solid var(--border-primary);
    align-items: center;
}

.duration {
    font-weight: 500;
    color: var(--fg-primary);
}

.user-price {
    font-weight: 600;
    color: var(--accent-secondary);
}

.reseller-price {
    font-weight: 600;
    color: var(--accent-primary);
    background: var(--bg-tertiary);
    padding: 4px 8px;
    border-radius: 6px;
}

.top-resellers-scroll {
    max-height: 300px;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--accent-primary) var(--bg-secondary);
}

.top-resellers-scroll::-webkit-scrollbar {
    width: 6px;
}

.top-resellers-scroll::-webkit-scrollbar-track {
    background: var(--bg-secondary);
    border-radius: 3px;
}

.top-resellers-scroll::-webkit-scrollbar-thumb {
    background: var(--accent-primary);
    border-radius: 3px;
}

.top-resellers-scroll::-webkit-scrollbar-thumb:hover {
    background: var(--accent-secondary);
}

.reseller-dashboard {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.reseller-dashboard > div {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 16px;
    padding: 24px;
    box-shadow: var(--shadow-card);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 24px;
}

.stat-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 12px;
    padding: 20px;
    text-align: center;
}

.stat-value {
    font-size: 24px;
    font-weight: 600;
    color: var(--accent-primary);
    font-family: 'JetBrains Mono', monospace;
}

.chat-modal {
    width: 90%;
    max-width: 600px;
    height: 70vh;
    display: flex;
    flex-direction: column;
}

.chat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border-primary);
    margin-bottom: 16px;
}

.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 16px 0;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.chat-message {
    display: flex;
    gap: 12px;
    margin-bottom: 8px;
}

.chat-message.own {
    justify-content: flex-end;
}

.message-bubble {
    max-width: 70%;
    padding: 12px 16px;
    border-radius: 16px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
}

.message-bubble.own {
    background: var(--gradient-primary);
    color: var(--bg-primary);
}

.message-bubble.other {
    background: var(--bg-secondary);
    color: var(--fg-primary);
}

.chat-input {
    display: flex;
    gap: 12px;
    padding-top: 16px;
    border-top: 1px solid var(--border-primary);
}

.chat-input input {
    flex: 1;
}

/* Search Styles */
.resale-search {
    display: flex;
    gap: 8px;
    margin-top: 16px;
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
}

.resale-search input {
    flex: 1;
}

/* Best Resellers */
.best-resellers {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 16px;
    padding: 24px;
    box-shadow: var(--shadow-card);
    margin-bottom: 24px;
}

.best-reseller-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px;
    background: var(--bg-secondary);
    border-radius: 12px;
    margin-bottom: 12px;
}

.rank-badge {
    width: 40px;
    height: 40px;
    background: var(--gradient-primary);
    color: var(--bg-primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 18px;
}

/* Enhanced Reseller Items */
.reseller-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 12px;
    margin-bottom: 16px;
    transition: all 0.3s ease;
}

.reseller-item:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-card);
}

.reseller-stats {
    display: flex;
    gap: 12px;
    margin: 8px 0;
    font-size: 14px;
}

.stat {
    background: var(--bg-tertiary);
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 12px;
}

.platforms i {
    cursor: pointer;
    margin-right: 8px;
    font-size: 18px;
    transition: all 0.3s ease;
}

.platforms i:hover {
    transform: scale(1.2);
    color: var(--accent-primary);
}

.reseller-actions {
    display: flex;
    gap: 8px;
}

.rank {
    color: var(--accent-primary);
    font-weight: 600;
    font-size: 14px;
}

.sales {
    color: var(--accent-secondary);
    font-size: 14px;
    font-weight: 500;
}

.admin-content {
    display: none;
}

.admin-content.active {
    display: block;
}

.admin-resale-panel .resale-tabs {
    margin-bottom: 20px;
}

@media (max-width: 768px) {
    .resale-content {
        grid-template-columns: 1fr;
    }

    .pricing-grid {
        grid-template-columns: 1fr;
    }

    .resale-tabs {
        flex-direction: column;
    }

    .reseller-item {
        flex-direction: column;
        gap: 16px;
        align-items: stretch;
    }

    .reseller-actions {
        justify-content: center;
    }

    .best-reseller-item {
        flex-direction: column;
        text-align: center;
    }

    .resale-search {
        margin: 16px 0;
    }
}
</style>
{% endblock %}